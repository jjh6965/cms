import{u as y,r as u,j as e,f as I,c as L,d as T,_ as D}from"./index-NQW_x_Sn.js";import{s as a}from"./Board.module-DCwUm73g.js";const M=({canWriteBoard:x})=>{const b=y(),[N,m]=u.useState([]),[s,C]=u.useState(1),g=5,l=10;u.useEffect(()=>{(async()=>{const c={gubun:"LIST",noticeId:"",debug:"F"};try{const d=await I(L,T.getServerUrl("notice/list"),c);if(d.errCd==="00"){const p=d.data.map(i=>({id:i.NOTICEID,title:i.TITLE,date:i.REGEDT}));m(p)}else console.error("Failed to fetch notices:",d.errMsg),m([])}catch(d){console.error("Error fetching notices:",d);const p=await D(()=>import("./notice-TzEAn8jb.js"),[]);m(p.default.map(i=>({id:i.NOTICEID,title:i.TITLE,date:i.REGEDT}))||[])}})()},[x]);const E=t=>{b("/main/boardView",{state:{notice:t}})},j=N.length||0,n=Math.ceil(j/g),f=s*g,k=f-g,$=N.slice(k,f),P=Math.floor(l/2);let r=Math.max(1,s-P),h=Math.min(n,r+l-1);h-r+1<l&&(r=Math.max(1,h-l+1));const v=Array.from({length:h-r+1},(t,c)=>r+c),o=t=>{C(t)};return e.jsxs("div",{className:"h-100 p-3 border",style:{width:"100%"},children:[e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("h3",{className:`mb-3 fs-5 text-dark ${a.boardTitle}`,children:"공지사항"}),x&&e.jsx("button",{className:`btn btn-primary mb-3 ${a.btnReg}`,onClick:()=>b("/main/boardWrite"),children:"등록"})]}),e.jsx("ul",{className:`list-group list-group-flush ${a.contentContainer}`,children:$.length>0?$.map((t,c)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("span",{onClick:()=>E(t),style:{cursor:"pointer"},children:[e.jsxs("span",{children:[j-(k+c),"."]}),e.jsx("span",{children:t.title})]}),e.jsx("div",{children:e.jsx("span",{className:`badge bg-primary rounded-pill me-2 ${a.contentDate}`,children:t.date||new Date().toLocaleDateString()})})]},c)):e.jsx("li",{className:"list-group-item text-center",children:"공지사항이 없습니다."})}),n>1&&e.jsx("nav",{"aria-label":"Page navigation",className:"mt-3",children:e.jsxs("ul",{className:`pagination justify-content-center ${a.pagination}`,children:[n>l&&e.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:e.jsx("button",{className:`page-link ${a.pageLink}`,onClick:()=>o(1),disabled:s===1,children:"<<"})}),e.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:e.jsx("button",{className:`page-link ${a.pageLink}`,onClick:()=>o(s-1),disabled:s===1,children:"<"})}),v.map(t=>e.jsx("li",{className:`page-item ${s===t?"active":""}`,children:e.jsx("button",{className:`page-link ${a.pageLink}`,onClick:()=>o(t),children:t})},t)),e.jsx("li",{className:`page-item ${s===n?"disabled":""}`,children:e.jsx("button",{className:`page-link ${a.pageLink}`,onClick:()=>o(s+1),disabled:s===n,children:">"})}),n>l&&e.jsx("li",{className:`page-item ${s===n?"disabled":""}`,children:e.jsx("button",{className:`page-link ${a.pageLink}`,onClick:()=>o(n),disabled:s===n,children:">>"})})]})})]})};export{M as default};
//# sourceMappingURL=Board-DRpcijFr.js.map
