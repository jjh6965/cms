import{r as T,j as e,d as M}from"./index-NQW_x_Sn.js";import{D as F}from"./DatePickerCommon-MvAA8I6u.js";import{e as R}from"./errorMsgPopup-CX9GGfgq.js";import{s as m}from"./TableSearch.module-DFltd_EQ.js";const w=(u,n)=>{const{name:g,value:b}=u.target;n(i=>({...i,[g]:b}))},A=u=>Object.fromEntries(u.map(n=>[n.id,n.defaultValue!==void 0?n.defaultValue:n.type==="checkbox"?!1:""])),V="_searchSection_rti0d_1",E="_formGroupContainer_rti0d_13",L="_searchFields_rti0d_20",z="_formGroup_rti0d_13",I="_radioGroup_rti0d_44",O="_radioLabel_rti0d_49",$="_buttonContainer_rti0d_55",P="_popupIcon_rti0d_61",y={searchSection:V,formGroupContainer:E,searchFields:L,formGroup:z,radioGroup:I,radioLabel:O,buttonContainer:$,popupIcon:P},J=({config:u,filters:n,setFilters:g,onEvent:b})=>{const i={width:"150px",height:"30px",backgroundColor:"#ffffff",color:"#000000"},C=255,j=new Date,r=j.toISOString().split("T")[0],p=`${j.getFullYear()}-${(j.getMonth()+1).toString().padStart(2,"0")}`,s=(h,o)=>h==="default"||!h?o:h;T.useEffect(()=>{var c;const h=((c=u.areas.find(t=>t.type==="search"))==null?void 0:c.fields)||[],o={};h.forEach(t=>{["day","startday","endday"].includes(t.type)&&n[t.id]===void 0?o[t.id]=t.defaultValue||r:["startmonth","endmonth"].includes(t.type)&&n[t.id]===void 0?o[t.id]=t.defaultValue||p:["dayperiod","monthperiod"].includes(t.type)&&n[t.id]===void 0&&(o[t.id]=t.defaultValue||{start:t.type==="dayperiod"?r:p,end:t.type==="dayperiod"?r:p})}),Object.keys(o).length>0&&g(t=>({...t,...o}))},[u,n,g]);const v=(h,o)=>{var a;const{id:c,maxLength:t,type:x}=o;let l=((a=h.target)==null?void 0:a.value)??h;if(x==="text"||x==="textarea"){const d=M.validateVarcharLength(l,t||C,o.label||"입력값");if(!d.valid){R(d.error);return}}g(d=>({...d,[c]:l})),o.event?b(o.event,{id:c,value:l}):x==="select"&&b("selectChange",{id:c,value:l})},_=(h,o)=>{g(c=>({...c,[o.id]:h.target.checked})),o.event&&b(o.event,{id:o.id,checked:h.target.checked})},N=(h,o)=>{w(h,g),o.event&&b(o.event,{id:o.id,value:h.target.value})},S=h=>{const{id:o,type:c}=h;let t={};o==="rangeEndDate"?t={rangeStartDate:r,rangeEndDate:r}:o==="rangeEndMonth"?t={rangeStartMonth:p,rangeEndMonth:p}:["dayperiod","monthperiod"].includes(c)?t[o]={start:c==="dayperiod"?r:p,end:c==="dayperiod"?r:p}:t[o]=c==="startmonth"||c==="endmonth"?p:r,g(x=>({...x,...t})),b("dateChange",{id:o,value:t[o]||Object.values(t)[0]})},D=h=>h.type==="startday"&&n.rangeEndDate?{maxDate:n.rangeEndDate}:h.type==="endday"&&n.rangeStartDate?{minDate:n.rangeStartDate}:h.type==="startmonth"&&n.rangeEndMonth?{maxDate:n.rangeEndMonth}:h.type==="endmonth"&&n.rangeStartMonth?{minDate:n.rangeStartMonth}:{},G=()=>{var t,x;const h=((t=u.areas.find(l=>l.type==="search"))==null?void 0:t.fields)||[],o=((x=u.areas.find(l=>l.type==="buttons"))==null?void 0:x.fields)||[],c={};return h.forEach(l=>{const a=l.row||1;c[a]||(c[a]={search:[],buttons:[]}),c[a].search.push(l)}),o.forEach(l=>{const a=l.row||1;c[a]||(c[a]={search:[],buttons:[]}),c[a].buttons.push(l)}),Object.keys(c).map(l=>e.jsxs("div",{className:y.formGroupContainer,children:[e.jsx("div",{className:y.searchFields,children:c[l].search.map(a=>e.jsxs("div",{className:y.formGroup,children:[a.labelVisible!==!1&&a.label&&e.jsx("label",{htmlFor:a.id,children:a.label}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(a.type==="text"||a.type==="textarea")&&(a.type==="text"?e.jsx("input",{id:a.id,name:a.id,type:"text",placeholder:a.placeholder||"",value:n[a.id]||"",onChange:d=>v(d,a),style:{width:s(a.width,i.width),height:s(a.height,i.height),backgroundColor:s(a.backgroundColor,i.backgroundColor),color:s(a.color,i.color),boxSizing:"border-box",margin:0},disabled:a.enabled===!1}):e.jsx("textarea",{id:a.id,name:a.id,placeholder:a.placeholder||"",value:n[a.id]||"",onChange:d=>v(d,a),style:{width:s(a.width,i.width),height:s(a.height,i.height),backgroundColor:s(a.backgroundColor),color:s(a.color,i.color),boxSizing:"border-box",margin:0},disabled:a.enabled===!1})),["day","startday","endday","startmonth","endmonth","dayperiod","monthperiod"].includes(a.type)&&e.jsxs("div",{style:{width:s(a.width,i.width),height:s(a.height,i.height),display:"flex",alignItems:"center"},children:[e.jsx(F,{id:a.id,type:a.type,value:n[a.id],onChange:d=>v(d,a),placeholder:a.placeholder||a.label||"",width:"100%",height:"100%",backgroundColor:a.backgroundColor,color:a.color,enabled:a.enabled,...D(a)}),e.jsx("button",{className:"btn btn-link p-0 ms-2",onClick:()=>S(a),title:"초기화",style:{lineHeight:"1"},children:e.jsx("i",{className:"bi bi-x-square fs-6"})})]}),a.type==="select"&&e.jsx("select",{id:a.id,name:a.id,value:n[a.id]||"",onChange:d=>v(d,a),style:{width:s(a.width,i.width),height:s(a.height,i.height),backgroundColor:s(a.backgroundColor,i.backgroundColor),color:s(a.color,i.color),boxSizing:"border-box",margin:0},disabled:a.enabled===!1,children:a.options.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),a.type==="radio"&&e.jsx("div",{className:y.radioGroup,children:a.options.map(d=>e.jsxs("label",{className:y.radioLabel,children:[e.jsx("input",{type:"radio",name:a.id,value:d.value,checked:n[a.id]===d.value,onChange:k=>N(k,a),disabled:a.enabled===!1}),d.label]},d.value))}),a.type==="checkbox"&&e.jsx("input",{type:"checkbox",id:a.id,name:a.id,checked:n[a.id]||!1,onChange:d=>_(d,a),disabled:a.enabled===!1}),a.type==="popupIcon"&&e.jsx("button",{className:y.popupIcon,onClick:()=>b(a.eventType,{id:a.id}),style:{width:s(a.width,i.width),height:s(a.height,i.height),backgroundColor:s(a.backgroundColor,i.backgroundColor),color:s(a.color,i.color),boxSizing:"border-box",margin:0},disabled:a.enabled===!1,children:"+"}),a.type==="button"&&e.jsx("button",{id:a.id,onClick:()=>b(a.eventType,{id:a.id}),style:{width:s(a.width,"80px"),height:s(a.height,"30px"),backgroundColor:s(a.backgroundColor,"#00c4b4"),color:s(a.color,"#ffffff"),boxSizing:"border-box",margin:0,border:"none",borderRadius:"4px",cursor:a.enabled?"pointer":"not-allowed"},disabled:a.enabled===!1,children:a.label})]})]},a.id))}),c[l].buttons.length>0&&e.jsx("div",{className:y.buttonContainer,children:c[l].buttons.map(a=>e.jsx("button",{onClick:()=>b(a.eventType,{id:a.id}),style:{width:s(a.width,"80px"),height:s(a.height,"30px"),backgroundColor:s(a.backgroundColor,"#00c4b4"),color:s(a.color,"#ffffff"),boxSizing:"border-box",margin:0},disabled:a.enabled===!1,children:a.label},a.id))})]},`row-${l}`))};return e.jsx("div",{className:y.searchSection,children:G()})},q=({rowCount:u})=>e.jsx("div",{className:m.tableTitleRow,children:e.jsxs("div",{className:m.tableTitle,children:[e.jsx("span",{className:m.resultText,children:"결과 ("}),e.jsxs("span",{className:m.rowCountText,children:[u," Rows"]}),e.jsx("span",{className:m.resultText,children:")"})]})}),K=({filterFields:u,filters:n,setFilters:g,onDownloadExcel:b,children:i,buttonStyles:C,rowCount:j})=>e.jsxs("div",{children:[e.jsxs("div",{className:m.searchSection,children:[e.jsxs("div",{className:m.formGroupContainer,children:[u.map(r=>e.jsxs("div",{className:m.formGroup,children:[e.jsx("label",{htmlFor:r.id,children:r.label}),r.type==="text"?e.jsx("input",{id:r.id,name:r.id,type:"text",placeholder:r.placeholder,value:n[r.id]||"",onChange:p=>w(p,g),style:{width:r.width||"auto",height:r.height||"auto"}}):r.type==="select"?e.jsx("select",{id:r.id,name:r.id,value:n[r.id]||"",onChange:p=>w(p,g),style:{width:r.width||"auto",height:r.height||"auto"},children:r.options.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))}):null]},r.id)),i&&e.jsx("div",{className:C==null?void 0:C.btnGroupCustom,children:i})]}),e.jsx("div",{className:m.buttonContainer,children:e.jsx("button",{onClick:b,className:m.downloadButton,children:"엑셀 다운로드"})})]}),e.jsx("div",{className:m.tableTitleRow,children:e.jsx(q,{rowCount:j||0})})]});export{J as M,K as T,A as i};
//# sourceMappingURL=TableSearch-D0PWM4AW.js.map
