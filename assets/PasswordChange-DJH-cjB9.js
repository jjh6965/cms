import{r as l,u as S,j as e,f as P,c as k,d as h}from"./index-NQW_x_Sn.js";import{m as D}from"./msgPopup-B5uV-LHr.js";import{s}from"./Join.module-bSSFgvx8.js";const U=({show:d,onHide:m,initialEmpNo:u,isEditable:x})=>{const[o,f]=l.useState(u||""),[c,N]=l.useState(""),[r,b]=l.useState(""),[p,j]=l.useState(""),[g,t]=l.useState(""),y=S();l.useEffect(()=>{d&&(f(u||""),N(""),b(""),j(""),t(""))},[d,u]);const C=()=>{if(!o||!c||!r||!p)return"필수 입력 항목을 모두 채워주세요.";const a=h.validateVarcharLength(o,20,"아이디");return a.valid?r.length<6?"새 비밀번호는 최소 6자 이상이어야 합니다.":r!==p?"새 비밀번호와 확인 비밀번호가 일치하지 않습니다.":c===r?"현재 비밀번호와 새 비밀번호가 동일할 수 없습니다.":"":a.error},$=async a=>{a.preventDefault(),t("");const v=C();if(v){t(v);return}try{const n={pEMPNO:o,pEMPPWD:c,pDEBUG:"F"},w=await P(k,`${h.getServerUrl("auth/password/list")}`,n);if(!w.success||!w.data){t("입력한 비밀번호와 현재 비밀번호가 다릅니다.");return}const E={pGUBUN:"U",pEMPNO:o,pEMPPWD:r},i=await P(k,`${h.getServerUrl("auth/password/save")}`,E);if(i.success)i.errMsg!==""?t(i.errMsg):(D("비밀번호가 성공적으로 변경되었습니다."),y("/login"),m());else throw new Error(i.errMsg||"비밀번호 변경에 실패했습니다.")}catch(n){console.error("Password change error:",n.message),t(n.message||"비밀번호 변경 중 오류가 발생했습니다. 다시 시도해주세요.")}};return d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.overlay,onClick:m}),e.jsx("div",{className:`${s.modal} show d-block`,tabIndex:"-1",children:e.jsx("div",{className:`${s.modalDialog} modal-dialog-centered`,children:e.jsxs("div",{className:`${s.modalContent} modal-content`,children:[e.jsxs("div",{className:`${s.modalHeader} modal-header`,children:[e.jsx("h5",{className:`${s.modalTitle} modal-title`,children:"비밀번호 변경"}),e.jsx("button",{type:"button",className:`${s.btnClose} btn-close`,onClick:m})]}),e.jsx("div",{className:`${s.modalBody} modal-body`,children:e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:s.formRow,children:[e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"empNo",className:"form-label",children:[e.jsx("i",{className:"bi bi-person me-2"}),"아이디 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empNo",value:o,onChange:a=>x&&f(a.target.value),disabled:!x,placeholder:"아이디를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"currentPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock me-2"}),"현재 비밀번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"currentPwd",value:c,onChange:a=>N(a.target.value),required:!0,placeholder:"현재 비밀번호를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"newPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock-fill me-2"}),"새 비밀번호 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"newPwd",value:r,onChange:a=>b(a.target.value),required:!0,placeholder:"새 비밀번호를 입력하세요"})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsxs("label",{htmlFor:"confirmPwd",className:"form-label",children:[e.jsx("i",{className:"bi bi-lock-fill me-2"}),"비밀번호 확인 ",e.jsx("i",{className:"bi bi-asterisk text-danger"})]}),e.jsx("input",{type:"password",className:"form-control",id:"confirmPwd",value:p,onChange:a=>j(a.target.value),required:!0,placeholder:"새 비밀번호를 다시 입력하세요"})]})]}),e.jsxs("button",{type:"submit",className:`${s.btn} w-100 mt-3`,children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"변경"]}),g&&e.jsx("p",{className:"text-danger text-center mt-2",children:g})]})})]})})})]}):null};export{U as default};
//# sourceMappingURL=PasswordChange-DJH-cjB9.js.map
