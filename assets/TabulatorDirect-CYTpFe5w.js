import{r as e,j as s,m as ee}from"./index-NQW_x_Sn.js";import{h as te,c as ae}from"./tableExcel-h_9-hs2N.js";import{i as F,M as le,T as ie}from"./TableSearch-D0PWM4AW.js";import{C as se}from"./CommonPopup-Dwp1i3fD.js";import{s as P}from"./TableSearch.module-DFltd_EQ.js";import"./DatePickerCommon-MvAA8I6u.js";import"./react-datepicker-D9fc_BLh.js";import"./index-BBx72Rax.js";import"./errorMsgPopup-CX9GGfgq.js";const re=[{id:1,name:"홍길동",age:25,status:"active"},{id:2,name:"김영희",age:30,status:"inactive"},{id:3,name:"이철수",age:35,status:"active"},{id:4,name:"홍길동",age:25,status:"active"},{id:5,name:"김영희",age:30,status:"inactive"},{id:6,name:"이철수",age:35,status:"active"},{id:7,name:"홍길동",age:25,status:"active"},{id:8,name:"김영희",age:30,status:"inactive"},{id:9,name:"이철수",age:35,status:"active"},{id:10,name:"홍길동",age:25,status:"active"},{id:11,name:"김영희",age:30,status:"inactive"},{id:12,name:"이철수",age:35,status:"active"},{id:13,name:"홍길동",age:25,status:"active"},{id:14,name:"김영희",age:30,status:"inactive"},{id:15,name:"이철수",age:35,status:"active"},{id:16,name:"홍길동",age:25,status:"active"},{id:17,name:"김영희",age:30,status:"inactive"},{id:18,name:"이철수",age:35,status:"active"},{id:19,name:"홍길동",age:25,status:"active"},{id:20,name:"김영희",age:30,status:"inactive"},{id:21,name:"김영희",age:30,status:"inactive"},{id:22,name:"이철수",age:35,status:"active"},{id:23,name:"홍길동",age:25,status:"active"},{id:24,name:"김영희",age:30,status:"inactive"},{id:25,name:"이철수",age:35,status:"active"},{id:26,name:"홍길동",age:25,status:"active"},{id:27,name:"김영희",age:30,status:"inactive"},{id:28,name:"이철수",age:35,status:"active"},{id:29,name:"홍길동",age:25,status:"active"},{id:30,name:"김영희",age:30,status:"inactive"},{id:31,name:"김영희",age:30,status:"inactive"},{id:32,name:"이철수",age:35,status:"active"},{id:33,name:"홍길동",age:25,status:"active"},{id:34,name:"김영희",age:30,status:"inactive"},{id:35,name:"이철수",age:35,status:"active"},{id:36,name:"홍길동",age:25,status:"active"},{id:37,name:"김영희",age:30,status:"inactive"},{id:38,name:"이철수",age:35,status:"active"},{id:39,name:"홍길동",age:25,status:"active"},{id:40,name:"김영희",age:30,status:"inactive"},{id:41,name:"김영희",age:30,status:"inactive"},{id:42,name:"이철수",age:35,status:"active"},{id:43,name:"홍길동",age:25,status:"active"},{id:44,name:"김영희",age:30,status:"inactive"},{id:45,name:"이철수",age:35,status:"active"},{id:46,name:"홍길동",age:25,status:"active"},{id:47,name:"김영희",age:30,status:"inactive"},{id:48,name:"이철수",age:35,status:"active"},{id:49,name:"홍길동",age:25,status:"active"},{id:50,name:"김영희",age:30,status:"inactive"},{id:51,name:"김영희",age:30,status:"inactive"},{id:52,name:"이철수",age:35,status:"active"},{id:53,name:"홍길동",age:25,status:"active"},{id:54,name:"김영희",age:30,status:"inactive"},{id:55,name:"이철수",age:35,status:"active"},{id:56,name:"홍길동",age:25,status:"active"},{id:57,name:"김영희",age:30,status:"inactive"},{id:58,name:"이철수",age:35,status:"active"},{id:59,name:"홍길동",age:25,status:"active"},{id:60,name:"김영희",age:30,status:"inactive"}],r=(c,o="")=>(console.log("AAA"),{status:[{value:"",label:"전체"},{value:"active",label:"활성"},{value:"inactive",label:"비활성"}],org1:[{value:"",label:"전체"},{value:"org1",label:"강남본부"},{value:"org2",label:"강북본부"}],org2:o==="org2"?[{value:"",label:"전체"},{value:"org21",label:"테스트지사"},{value:"org22",label:"강북지사"},{value:"org23",label:"하남지사"}]:[{value:"",label:"전체"}],org3:o==="org22"?[{value:"",label:"전체"},{value:"org221",label:"노원지점"},{value:"org222",label:"성동지점"},{value:"org223",label:"테스트지점"}]:[{value:"",label:"전체"}],role:[{value:"admin",label:"관리자"},{value:"user",label:"사용자"}],filterSelect:[{value:"",label:"선택"},{value:"name",label:"이름"},{value:"age",label:"나이"},{value:"status",label:"상태"}],orgSelect:[{value:"",label:"선택"},{value:"A0001",label:"강남본부"},{value:"A0002",label:"강북본부"}]}[c]||[]),oe=({initialOrg:c,onSelect:o})=>{const[v,g]=e.useState(c);return e.useEffect(()=>{g(c)},[c]),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"orgSelect",children:"조직 선택: "}),s.jsx("select",{id:"orgSelect",value:v,onChange:u=>{g(u.target.value),o(u.target.value)},children:r("orgSelect").map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))})]})},ve=()=>{const[c,o]=e.useState(!1),[v,g]=e.useState(""),[u,S]=e.useState(null),[W,C]=e.useState(null),[m,z]=e.useState(""),[q,R]=e.useState(r("org2")),[G,k]=e.useState(r("org3")),M=e.useRef(m);e.useEffect(()=>{M.current=m},[m]);const V=new Date,p=V.toISOString().split("T")[0],x=`${V.getFullYear()}-${(V.getMonth()+1).toString().padStart(2,"0")}`,T={areas:[{type:"search",fields:[{id:"name",type:"text",row:1,label:"이름",labelVisible:!0,placeholder:"이름 검색",maxLength:50,width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0},{id:"status",type:"select",row:1,label:"상태",labelVisible:!0,options:r("status"),width:"150px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0},{id:"orgText",type:"text",row:2,label:"조직예제",labelVisible:!0,placeholder:"조직 선택",width:"150px",height:"30px",backgroundColor:"#f0f0f0",color:"#000000",enabled:!1},{id:"orgPopupBtn",type:"popupIcon",row:2,label:"조직 선택",labelVisible:!1,eventType:"showOrgPopup",width:"30px",height:"30px",backgroundColor:"#f0f0f0",color:"#000000",enabled:!0},{id:"testSearchBtn",type:"button",row:2,label:"버튼",labelVisible:!1,eventType:"testSearch",width:"80px",height:"30px",backgroundColor:"#00c4b4",color:"#ffffff",enabled:!0},{id:"status1",type:"select",row:3,label:"드롭리스트예제",labelVisible:!0,options:r("org1"),width:"150px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0},{id:"status2",type:"select",row:3,label:"드롭리스트예제",labelVisible:!1,options:q,width:"150px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0},{id:"status3",type:"select",row:3,label:"드롭리스트예제",labelVisible:!1,options:G,width:"150px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0},{id:"createdDate",type:"day",row:4,label:"일자예제",labelVisible:!0,placeholder:"날짜 선택",width:"140px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:p},{id:"rangeStartDate",type:"startday",row:5,label:"기간(일자)예제",labelVisible:!0,placeholder:"시작일 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:p},{id:"rangeEndDate",type:"endday",row:5,label:" ~ ",labelVisible:!0,placeholder:"종료일 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:p},{id:"rangeStartMonth",type:"startmonth",row:5,label:"기간(월)예제",labelVisible:!0,placeholder:"시작월 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:x},{id:"rangeEndMonth",type:"endmonth",row:5,label:" ~ ",labelVisible:!0,placeholder:"종료월 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:x},{id:"dayPeriod",type:"dayperiod",row:6,label:"날짜범위 예제",labelVisible:!0,placeholder:"날짜 범위 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:{start:p,end:p}},{id:"monthPeriod",type:"monthperiod",row:6,label:"월범위 예제",labelVisible:!0,placeholder:"월 범위 선택",width:"200px",height:"30px",backgroundColor:"#ffffff",color:"#000000",enabled:!0,defaultValue:{start:x,end:x}},{id:"isActive",type:"checkbox",row:7,label:"체크박스 예제",labelVisible:!0,width:"default",height:"default",backgroundColor:"default",color:"default",enabled:!0},{id:"role",type:"radio",row:8,label:"라디오버튼 예제",labelVisible:!0,options:r("role"),width:"default",height:"default",backgroundColor:"default",color:"default",enabled:!0}]},{type:"buttons",fields:[{id:"searchBtn",type:"button",row:1,label:"검색",eventType:"search",width:"80px",height:"30px",backgroundColor:"#00c4b4",color:"#ffffff",enabled:!0},{id:"resetBtn",type:"button",row:8,label:"초기화",eventType:"reset",width:"80px",height:"30px",backgroundColor:"#00c4b4",color:"#ffffff",enabled:!0},{id:"popupBtn2",type:"button",row:"8",label:"팝업 버튼",eventType:"showPopup",width:"100px",height:"30px",backgroundColor:"#00c4b4",color:"#ffffff",enabled:!0}]}]},I=[{id:"filterSelect",type:"select",label:"",options:r("filterSelect"),width:"default",height:"default",backgroundColor:"default",color:"default",enabled:!0},{id:"filterText",type:"text",label:"",placeholder:"찾을 내용을 입력하세요",width:"default",height:"default",backgroundColor:"default",color:"default",enabled:!0}],[w,h]=e.useState(F(T.areas.find(a=>a.type==="search").fields)),[y,K]=e.useState(F(I)),[d,N]=e.useState(!1),[A,E]=e.useState([]),[B,H]=e.useState(!1),[f,D]=e.useState("initializing"),[L,U]=e.useState(null),[Q,X]=e.useState(0),O=e.useRef(null),i=e.useRef(null),j=e.useRef(!0),$=e.useRef(w);e.useEffect(()=>{$.current=w},[w]);const Z=[{title:"ID",field:"id",width:80,headerHozAlign:"center",hozAlign:"center"},{title:"이름",field:"name",width:150,headerHozAlign:"center",hozAlign:"left"},{title:"나이",field:"age",sorter:"number",headerHozAlign:"center",hozAlign:"right"},{title:"상태",field:"status",headerHozAlign:"center",hozAlign:"left"}],_=async()=>{N(!0),H(!0),U(null),await new Promise(l=>setTimeout(l,0));const a=$.current,t={name:a.name||"",status:a.status||""};try{const l=await ee(re,t),n=(Array.isArray(l)?l:[l]).filter(J=>(!t.name||J.name===t.name)&&(!t.status||J.status===t.status));E(n)}catch(l){E([]),U("데이터 로드 실패: "+l.message)}finally{N(!1)}},Y=(a,t)=>{if(a==="search")_();else if(a==="reset")h(F(T.areas.find(l=>l.type==="search").fields)),E([]),H(!1),z(""),R(r("org2")),k(r("org3"));else if(a==="showPopup")g("팝업"),S(`ID: ${t.id}에서 호출됨`),C(()=>()=>(o(!1),!0)),o(!0);else if(a==="showOrgPopup")g("조직 선택"),S(s.jsx(oe,{initialOrg:m,onSelect:l=>z(l)})),C(()=>()=>{const l=M.current;if(l){const b=r("orgSelect").find(n=>n.value===l);console.log("Selected org value:",l),h(n=>({...n,orgText:b?b.label:""}))}return o(!1),!0}),o(!0);else if(a==="testSearch")g("테스트"),S("테스트 버튼이 클릭되었습니다."),C(()=>()=>(o(!1),!0)),o(!0);else if(a==="selectChange"){const{id:l,value:b}=t;l==="status1"?(R(r("org2",b)),k(r("org3")),h(n=>({...n,status2:"",status3:""}))):l==="status2"&&(k(r("org3",b)),h(n=>({...n,status3:""})))}};return e.useEffect(()=>((async()=>{if(await new Promise(t=>setTimeout(t,1e3)),!O.current){console.warn("테이블 컨테이너가 준비되지 않았습니다.");return}try{if(i.current=ae(O.current,Z,[],{}),!i.current)throw new Error("createTable returned undefined or null");D("ready")}catch(t){D("error"),console.error("테이블 초기화 실패패:",t.message)}})(),()=>{i.current&&(i.current.destroy(),i.current=null,D("initializing"))}),[]),e.useEffect(()=>{var t;if(j.current){j.current=!1;return}const a=i.current;if(!(!a||f!=="ready"||d))if((t=a.rowManager)!=null&&t.renderer)if(a.setData(A),B&&A.length===0&&!d)i.current.alert("검색 결과 없음","info");else{i.current.clearAlert();const l=i.current.getDataCount();X(l)}else console.warn("renderer가 아직 초기화되지 않았습니다.")},[A,d,f,B]),e.useEffect(()=>{if(j.current||!i.current||f!=="ready"||d)return;const{filterSelect:a,filterText:t}=y;t&&a?i.current.setFilter(a,"like",t):t?t!==""?i.current.setFilter([{field:"MENUNM",type:"like",value:t},{field:"URL",type:"like",value:t},{field:"USEYN",type:"like",value:t}],"or"):i.current.clearFilter():a&&i.current.clearFilter()},[y.filterSelect,y.filterText,f,d]),s.jsxs("div",{className:P.container,children:[s.jsx(le,{config:T,filters:w,setFilters:h,onEvent:Y}),s.jsx(ie,{filterFields:I,filters:y,setFilters:K,onDownloadExcel:()=>te(i.current,f,"테스트.xlsx"),rowCount:Q,onEvent:Y}),s.jsxs("div",{className:P.tableWrapper,children:[f==="initializing"&&s.jsx("div",{children:"초기화 중..."}),d&&s.jsx("div",{children:"로딩 중..."}),L&&s.jsx("div",{children:L}),s.jsx("div",{ref:O,className:P.tableSection,style:{visibility:d||f!=="ready"?"hidden":"visible"}})]}),s.jsx(se,{show:c,onHide:()=>o(!1),onConfirm:W,title:v,children:u})]})};export{ve as default};
//# sourceMappingURL=TabulatorDirect-CYTpFe5w.js.map
