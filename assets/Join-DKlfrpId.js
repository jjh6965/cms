import{r as t,u as C,j as e,f as q,c as M,d as c}from"./index-NQW_x_Sn.js";import{m as $}from"./msgPopup-B5uV-LHr.js";import{e as x}from"./errorMsgPopup-CX9GGfgq.js";import{s as a}from"./Join.module-bSSFgvx8.js";const D=({show:h,onHide:d})=>{const[m,v]=t.useState(""),[u,j]=t.useState(""),[n,f]=t.useState(""),[N,g]=t.useState(""),[l,b]=t.useState(""),[i,y]=t.useState(""),E=C();t.useEffect(()=>{h&&(v(""),j(""),f(""),g(""),b(""),y(""))},[h]);const P=()=>{if(!m||!u||!n||!N||!l||!i)return"필수 입력 항목을 모두 채워주세요.";const s=c.validateVarcharLength(m,20,"아이디");if(!s.valid)return s.error;const o=c.validateVarcharLength(u,50,"이름");if(!o.valid)return o.error;const p=c.validateVarcharLength(l,20,"핸드폰번호");if(!p.valid)return p.error;const r=c.validateVarcharLength(i,50,"이메일");return r.valid?n.length<6?"비밀번호는 최소 6자 이상이어야 합니다.":n!==N?"비밀번호와 비밀번호 확인이 일치하지 않습니다.":i&&!/^[^\s@]+@[^\n@]+\.[^\n@]+$/.test(i)?"유효한 이메일 형식이 아닙니다.":l&&!/^(\d{2,3})-(\d{3,4})-(\d{3,4})$/.test(l)?"핸드폰번호 형식이 올바르지 않습니다. (예: 010-1234-5678)":"":r.error},w=async s=>{s.preventDefault();const o=P();if(o){x(o);return}const p={pGUBUN:"I",pEMPNO:m,pEMPNM:u,pEMPPWD:n,pPHONE:l,pMOBILE:l,pEMAIL:i};try{const r=await q(M,`${c.getServerUrl("auth/join/save")}`,p);if(r.success)r.errMsg!==""?x(r.errMsg):($("가입되었습니다."),E("/login"),d());else throw new Error(r.errMsg||"가입정보가 잘못되었습니다.")}catch(r){console.error("Registration error:",r),x(r.message||"가입 중 오류가 발생했습니다. 다시 시도해주세요.")}};return h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a.overlay,onClick:d}),e.jsx("div",{className:`${a.modal} show d-block`,tabIndex:"-1",children:e.jsx("div",{className:`${a.modalDialog} modal-dialog-centered`,children:e.jsxs("div",{className:`${a.modalContent} modal-content`,children:[e.jsxs("div",{className:`${a.modalHeader} modal-header`,children:[e.jsx("h5",{className:`${a.modalTitle} modal-title`,children:"회원가입"}),e.jsx("button",{type:"button",className:`${a.btnClose} btn-close`,onClick:d})]}),e.jsx("div",{className:`${a.modalBody} modal-body`,children:e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:a.formRow,children:[e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"empNo",className:a.label,children:["아이디 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("div",{className:a.inputWithButton,children:e.jsx("input",{type:"text",className:a.input,id:"empNo",value:m,onChange:s=>v(s.target.value),required:!0,placeholder:"아이디를 입력하세요"})})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"empNm",className:a.label,children:["이름 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("input",{type:"text",className:a.input,id:"empNm",value:u,onChange:s=>j(s.target.value),required:!0,placeholder:"이름을 입력하세요"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"empPwd",className:a.label,children:["비밀번호 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("input",{type:"password",className:a.input,id:"empPwd",value:n,onChange:s=>f(s.target.value),required:!0,placeholder:"비밀번호를 입력하세요"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"confirmPwd",className:a.label,children:["비밀번호 확인 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("input",{type:"password",className:a.input,id:"confirmPwd",value:N,onChange:s=>g(s.target.value),required:!0,placeholder:"비밀번호를 다시 입력하세요"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"mobile",className:a.label,children:["핸드폰번호 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("input",{type:"tel",className:a.input,id:"mobile",value:l,onChange:s=>b(s.target.value),required:!0,placeholder:"핸드폰번호를 입력하세요"})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsxs("label",{htmlFor:"email",className:a.label,children:["이메일 ",e.jsx("span",{className:a.required,children:"*"})]}),e.jsx("input",{type:"email",className:a.input,id:"email",value:i,onChange:s=>y(s.target.value),required:!0,placeholder:"이메일을 입력하세요"})]})]}),e.jsxs("div",{className:a.buttonGroup,children:[e.jsx("button",{type:"submit",className:a.btnSubmit,children:"가입하기"}),e.jsx("button",{type:"button",className:a.btnCancel,onClick:d,children:"취소"})]})]})})]})})})]}):null};export{D as default};
//# sourceMappingURL=Join-DKlfrpId.js.map
